{% extends 'layout2.html'%}
{% load custom_filters %}
{% block sidebar %}
  {% include 'sidebar.html' %}
{% endblock %}
{% block main_content %}
<div class="container mt-3">
    <a href="{% url 'student_list_in_teacher' %}"> <i class="fa fa-arrow-left fa-2x text-primary" aria-hidden="true"></i> Back to Students</a>
    <form method="POST" action="{% url 'add_marks' %}" class="mt-3">
        {% csrf_token %}
        <input type="text" class="form-control" name="sem" value="{{ sem }}" hidden>
        <input type="text" class="form-control" name="id" value="{{ id }}" hidden>
        {% if student_marks %}
            {% for subject in subjects.get_subjects %}
            <div class="mb-3">
                <label for="exampleInputEmail1" class="form-label">{{ subject.name }}</label>
                <input type="text" class="form-control" name="{{ subject.id }}" value="{{ student_marks.marks|get_value:subject.id }}" oninput="validateNumericRange(this)" required>
            </div>
            {% endfor %}
        {% else %}
            {% for subject in subjects.get_subjects %}
            <div class="mb-3">
                <label for="exampleInputEmail1" class="form-label">{{ subject.name }}</label>
                <input type="text" class="form-control" name="{{ subject.id }}" oninput="validateNumericRange(this)" required>
            </div>
            {% endfor %}
        {% endif %}    
    
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>  
{% endblock %}
{% block js %}
    <script>
        function validateNumericRange(input) {
            let value = input.value.replace(/\D/g, '');

            if (value === '' || parseInt(value) < 0 || parseInt(value) > 100) {
                input.value = '';  
            } 
        }
    </script>
{% endblock %}
